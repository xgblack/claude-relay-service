# 技术设计: OpenAI-Responses 优先级调度纠正

## 技术方案
### 核心技术
- Node.js / Express 服务内调度逻辑
- 现有 unifiedOpenAIScheduler 排序函数调整

### 实现要点
- 为共享池与分组调度统一使用“priority 升序 → lastUsedAt 升序 → createdAt 升序”的排序器。
- 保留并兼容粘性会话：若命中粘性映射仍优先使用；仅在重新选择时应用新的排序。
- 调整日志文案，明确显示 priority 及 lastUsedAt，以便验证。

## 架构设计
- 局部逻辑变更，无架构图更新。

## 架构决策 ADR
- 无新增 ADR，属于现有策略纠偏。

## API设计
- 不涉及 API 变更。

## 数据模型
- 不涉及数据结构变更，仅读取已有 priority 字段。

## 安全与性能
- 安全：无新增外部调用，变更仅在内存排序层，不引入安全风险。
- 性能：排序时间复杂度 O(n log n)，与现状一致；字段读取保持原样。

## 测试与部署
- 回归自测：
  - 共享池：构造 priority=10/50 的账户，确认选择结果偏向 10。
  - 分组调度：同组双账号，验证排序与日志输出。
  - 粘性会话：命中映射后不重新排序。
- 部署：常规上线流程，无额外步骤。

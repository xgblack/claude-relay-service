# 变更提案: 调用明细时间线全量视图

## 需求背景
运维希望直接通过一个独立 URL 查看所有 API Key 的请求时间线，便于快速排查热点 Key 和异常调用，不必逐个 Key 进入详情页。同时需展示 Key 名称并在时间字段提供中文相对时间提升可读性。

## 产品分析

### 目标用户与场景
- **用户群体:** 平台运维、管理员
- **使用场景:** 异常流量排查、热点 Key 观察、成本与限流核查
- **核心痛点:** 现有页面需逐 Key 查看，无法总览；时间阅读成本高

### 价值主张与成功指标
- **价值主张:** 一次性总览所有 Key 调用时间线，快速识别异常
- **成功指标:** 页面首屏加载<2s（缓存命中情况下），支持≥200条记录分页浏览；新增相对时间减少定位时间成本

### 人文关怀
- 中文相对时间表述，降低阅读负担；保留原始时间避免歧义

## 变更内容
1. 后端新增聚合调用明细接口（基于 main 分支，无依赖 plus 路由），返回所有 Key 的请求时间线，包含 key 名称与必要字段。
2. 前端新增独立路由与页面，沿用现有 API Key 请求详情时间线样式，新增 API Key 列与相对时间展示。
3. 页面仅需通过 URL 访问，不影响导航；保留现有字段与排序/分页行为。

## 影响范围
- **模块:** admin 后端路由、管理端 SPA 路由与视图
- **文件:** src/routes/admin/*（新增文件）、web/admin-spa/src/router/index.js、web/admin-spa/src/views/*（新增文件）
- **API:** 新增 GET /admin/usage-records-timeline（暂定）
- **数据:** 读取 Redis 中 usage records，不修改存储

## 核心场景

### 需求: 总览调用时间线
**模块:** admin-web
查看独立 URL `/usage-timeline`，能看到所有 Key 的调用时间线，支持排序与分页。

#### 场景: 默认访问
- 无筛选参数，按时间倒序显示最近记录，展示 API Key 名称与相对时间。

#### 场景: 保留字段
- 表格列与现有单 Key 时间线一致，新增 API Key 列，时间列下方显示中文相对时间。

## 风险评估
- **风险:** 数据量较大导致接口或页面性能下降
- **缓解:** 接口加总记录上限与分页，默认页大小限制；复用已有成本计算逻辑避免重复实现
